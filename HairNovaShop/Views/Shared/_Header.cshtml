<!-- Header Partial View - Shared across all pages -->
<!-- Top Bar -->
<div class="top-bar">
    <div class="marquee-content">
        <span>‚ö°Ô∏è GI·∫¢M GI√Å S·ªêC 20% TO√ÄN B·ªò S·∫¢N PH·∫®M ‚Äî H√ÄNG M·ªöI V·ªÄ ‚Äî MI·ªÑN PH√ç V·∫¨N CHUY·ªÇN CHO ƒê∆†N T·ª™ 59K ‚ö°Ô∏è CH√ÄO M·ª™NG B·∫†N ƒê·∫æN V·ªöI HAIRNOVA ‚ö°Ô∏è</span>
    </div>
</div>

<!-- Header -->
<header>
    <a class="logo" asp-area="" asp-controller="Home" asp-action="Index">
        <img src="~/images/logo.png" alt="Logo HairNova" style="width: 180px; height: auto;">
    </a>

    <nav>
        <ul>
            @{
                var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
                var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
            }
            <li><a asp-area="" asp-controller="Home" asp-action="Index" class="@(currentController == "Home" && currentAction == "Index" ? "active" : "")">Trang ch·ªß</a></li>

            <li class="nav-item-dropdown">
                <a asp-controller="Shop" asp-action="Index" class="@(currentController == "Shop" || currentController == "Product" ? "active" : "")">C·ª≠a h√†ng <i class="fa-solid fa-angle-down" style="font-size: 12px; margin-left: 4px;"></i></a>
                <ul class="dropdown-menu">
                    @await Component.InvokeAsync("Categories")
                </ul>
            </li>

            <li><a asp-controller="News" asp-action="Index" class="@(currentController == "News" ? "active" : "")">Tin t·ª©c</a></li>
            <li><a asp-controller="About" asp-action="Index" class="@(currentController == "About" ? "active" : "")">Gi·ªõi thi·ªáu</a></li>
            <li><a asp-controller="Contact" asp-action="Index" class="@(currentController == "Contact" ? "active" : "")">Li√™n h·ªá</a></li>
            <li><a asp-controller="Policy" asp-action="Index" class="@(currentController == "Policy" ? "active" : "")">Ch√≠nh s√°ch</a></li>
        </ul>
    </nav>

    <div class="header-actions">
        <button class="icon-btn" title="T√¨m ki·∫øm" id="searchBtn">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
        </button>

        <a asp-controller="Wishlist" asp-action="Index" class="icon-btn" title="Y√™u th√≠ch" id="wishlistIcon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
            <span class="badge-count wishlist-badge" style="display: none;">0</span>
        </a>
        <a asp-controller="Cart" asp-action="Index" class="icon-btn" title="Gi·ªè h√†ng" id="cartIcon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
            @await Component.InvokeAsync("CartCount")
        </a>
        @{
            var userId = Context.Session.GetString("UserId");
            var fullName = Context.Session.GetString("FullName");
            var role = Context.Session.GetString("Role");
            var isAdmin = !string.IsNullOrEmpty(role) && role == "Admin";
        }
        @if (!string.IsNullOrEmpty(userId))
        {
            <div class="user-dropdown">
                <button class="icon-btn" title="T√†i kho·∫£n" id="userBtn" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                </button>
                <ul class="user-dropdown-menu" id="userDropdownMenu">
                    <li><a href="#"><strong>@fullName</strong></a></li>
                    @if (isAdmin)
                    {
                        <li><hr /></li>
                        <li><a asp-controller="Admin" asp-action="Index"><strong style="color: #dc3545;">üîê Qu·∫£n tr·ªã</strong></a></li>
                    }
                    <li><a asp-controller="Account" asp-action="Index">Th√¥ng tin t√†i kho·∫£n</a></li>
                    <li><a asp-controller="Account" asp-action="Index" asp-fragment="orders">ƒê∆°n h√†ng c·ªßa t√¥i</a></li>
                    <li><hr /></li>
                    <li><a asp-controller="Account" asp-action="Logout">ƒêƒÉng xu·∫•t</a></li>
                </ul>
            </div>
        }
        else
        {
            <a asp-controller="Account" asp-action="Login" class="icon-btn" title="T√†i kho·∫£n">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
            </a>
        }
    </div>
</header>

<!-- Search Overlay -->
<div class="search-overlay" id="searchOverlay">
    <div class="search-box-content">
        <button class="close-search" id="closeSearchBtn">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <div class="search-input-wrapper">
            <i class="fa-solid fa-magnifying-glass search-icon-input"></i>
            <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." id="searchInput" autocomplete="off">
            <!-- Suggestions Dropdown -->
            <div class="search-suggestions" id="searchSuggestions"></div>
        </div>

        <button class="btn-search-submit">T√¨m ki·∫øm</button>
    </div>
</div>
